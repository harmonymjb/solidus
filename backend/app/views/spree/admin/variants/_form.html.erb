<div class="container-fluid">
  <div class="row">
    <div class="col-lg-8 col-xs-12">

      <div data-hook="variants">
        <fieldset class="no-border-top no-border-bottom">
          <div class="row form-section">
            <div class="col-md-6 col-xs-8">
              <div data-hook="sku" class="field">
                <%= f.label :sku %>
                <%= f.text_field :sku, :class => 'fullwidth' %>
              </div>
            </div>

            <div data-hook="track_inventory" class="col-md-6 col-xs-4">
              <div class="field checkbox">
                <%= f.label :track_inventory do %>
                  <%= f.check_box :track_inventory %>
                  <%= Spree::Variant.human_attribute_name(:track_inventory) %>
                <% end %>
              </div>
            </div>
          </div>

          <% if f.object.new_record? %>
            <table class="variant-options">
              <colgroup>
                <col style="width: 50%;">
                <col style="width: 50%;">
              </colgroup>
              <thead>
                <tr>
                  <th>Option type</th>
                  <th>Options</th>
                </tr>
              </thead>
              <tbody>
                <% @product.option_types.each_with_index do |option_type, index| %>
                  <tr data-hook="presentation">
                    <td>
                    <%= label :new_variant, option_type.presentation %>
                    </td>
                    <td>
                    <%= f.collection_select 'option_value_ids',
                      option_type.option_values,
                      :id,
                      :presentation,
                      { include_blank: true },
                      {
                      name: 'variant[option_value_ids][]',
                      class: "select2 fullwidth"
                    } %>
                    </td>
                  </div>
                <% end %>
              </tbody>
            </table>
          <% end %>

        </fieldset>
      </div>

      <div data-hook="admin_variant_form_fields">
        <div class="row form-section">
          <div class="col-xs-12">
            <h3>Pricing</h3>
          </div>

          <div class="col-xs-12">
            <fieldset class="no-border-top no-border-bottom">
              <p> <%== t('.pricing_hint') %> </p>

              <div class="row">
                <div class="col-md-3 col-xs-6">
                  <div class="field" data-hook="price">
                    <%= f.label :price %>
                    <%= f.text_field :price, :value => number_to_currency(@variant.price, :unit => ''), :class => 'fullwidth' %>
                  </div>
                </div>

                <div class="col-xs-6">
                  <% if show_rebuild_vat_checkbox? %>
                    <%= render "spree/admin/shared/rebuild_vat_prices_checkbox", form: f, model_name: "variant", wrapper_class: "field" %>
                  <% end %>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3 col-xs-6">
                  <div class="field" data-hook="cost_price">
                    <%= f.label :cost_price %>
                    <%= f.text_field :cost_price, :value => number_to_currency(@variant.cost_price, :unit => ''), :class => 'fullwidth' %>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 col-xs-12">
                  <div class="field" data-hook="tax_category">
                    <%= f.label :tax_category %>
                    <%= f.field_hint :tax_category %>
                    <%= f.collection_select :tax_category_id,
                                            @tax_categories,
                                            :id,
                                            :name,
                                            { :include_blank => t('.use_product_tax_category') },
                                            { :class => 'select2 fullwidth' } %>
                  </div>
                </div>
              </div>
            </fieldset>

          </div>
        </div>
      </div>

      <div data-hook="admin_variant_form_additional_fields">
        <div class="row form-section">
          <div class="col-xs-12">
            <h3>Shipping</h3>
          </div>
          <div class="col-xs-12">
            <fieldset class="no-border-top no-border-bottom">
              <div class="row">
                <% [:weight, :height, :width, :depth].each_with_index do |field, index| %>
                  <div data-hook="<%= field %>" class="col-md-3 col-xs-6">
                    <%= f.label field %>
                    <%= f.text_field field,
                                    value: number_with_precision(@variant.send(field), :precision => 2),
                                    class: 'fullwidth' %>
                  </div>
                <% end %>
              </div>
            </fieldset>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


<div class="clear"></div>
